@import "tailwindcss";

/* Dark mode variant for class-based toggling */
@custom-variant dark (&:where(.dark, .dark *));

/* Theme tokens */
@theme {
  --font-display: 'Fraunces', Georgia, serif;
}

/* Two-tone black and white theme with red accents */
:root {
  /* Base colors */
  --color-light: oklch(0.9702 0 0);
  --color-light-alt: oklch(0.85 0 0);
  --color-dark: oklch(0.2178 0 0);
  --color-dark-alt: oklch(0.3 0 0);
  --color-dark-muted: oklch(0.4 0 0);
  --color-accent: oklch(0.5733 0.2051 146.12);
  --color-accent-hover: oklch(0.6233 0.2051 146.12);
  --color-accent-dark: oklch(0.4733 0.2051 146.12);
  --color-danger: oklch(0.5733 0.2051 50);
  --color-danger-bg: oklch(0.7632 0.1954 50 / 0.2);

  /* Semantic mapping for light mode
     When hosted in an MCP app host (e.g. Claude Desktop), the host sets
     --color-background-primary, --color-text-primary, etc. on :root.
     We fall back to the app's own palette for standalone use. */
  --color-bg: var(--color-background-primary, var(--color-light));
  --color-bg-alt: var(--color-background-secondary, var(--color-light-alt));
  --color-text: var(--color-text-primary, var(--color-dark));
  --color-text-muted: var(--color-text-secondary, var(--color-dark-muted));
  --color-border-dark: rgba(26, 26, 26, 0.2);
  --color-border-darker: rgba(26, 26, 26, 0.4);
  --color-border-light: rgba(255, 255, 255, 0.2);
  --color-border-lighter: rgba(255, 255, 255, 0.4);
  --color-border: var(--color-border-primary, var(--color-border-dark));
  --color-border-hover: var(--color-border-secondary, var(--color-border-darker));

  /* Button shadows */
  --shadow-3d: 0 4px 0 var(--color-dark);
  --shadow-3d-sm: 0 2px 0 var(--color-dark);
  --shadow-3d-pressed: 0 1px 0 var(--color-dark);

  /* Card shadows */
  --shadow-card: 0 2px 0 rgba(26, 26, 26, 0.15);

  /* Subtle button/card background colors */
  --color-accent-subtle: var(--color-background-secondary, rgba(26, 26, 26, 0.1));
  --color-accent-subtle-hover: var(--color-background-tertiary, rgba(26, 26, 26, 0.15));
}

/* Dark mode - inverted theme */
.dark {
  --color-bg: var(--color-background-primary, var(--color-dark));
  --color-bg-alt: var(--color-background-secondary, var(--color-dark-alt));
  --color-text: var(--color-text-primary, var(--color-light));
  --color-text-muted: var(--color-text-secondary, #999999);
  --color-border: var(--color-border-primary, var(--color-border-light));
  --color-border-hover: var(--color-border-secondary, var(--color-border-lighter));
  --color-accent: oklch(0.9 0.1954 119.02);
  --color-accent-hover: oklch(0.95 0.1954 119.02);
  --color-accent-dark: oklch(0.75 0.1954 119.02);
  --color-danger: oklch(0.7632 0.1954 50);
  --color-danger-bg: oklch(0.7632 0.1954 50 / 0.2);

  /* Button shadows for dark mode */
  --shadow-3d: 0 4px 0 #000000;
  --shadow-3d-sm: 0 2px 0 #000000;
  --shadow-3d-pressed: 0 1px 0 #000000;

  /* Card shadows */
  --shadow-card: 0 2px 0 rgba(0, 0, 0, 0.3);

  /* Subtle button/card background colors for dark mode */
  --color-accent-subtle: var(--color-background-secondary, rgba(255, 255, 255, 0.1));
  --color-accent-subtle-hover: var(--color-background-tertiary, rgba(255, 255, 255, 0.15));
}

/* Base body styles */
body {
  font-family: var(--font-sans, 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif);
  background-color: var(--color-bg);
  color: var(--color-text);
}

/* ===================================
   CUSTOM UTILITIES
   =================================== */

/* 3D button press effect - used with Tailwind classes */
@utility btn-3d-press {
  transform: translateY(0);
  transition: all 0.1s ease;

  &:active {
    box-shadow: var(--shadow-3d-pressed);
    transform: translateY(3px);
  }
}

@utility btn-3d-press-sm {
  transform: translateY(0);
  transition: all 0.1s ease;

  &:active {
    box-shadow: none;
    transform: translateY(2px);
  }
}

/* Checkbox with checkmark pseudo-element */
@utility checkbox-retro {
  appearance: none;
  width: 1.25rem;
  height: 1.25rem;
  background-color: var(--color-bg);
  border: 2px solid currentColor;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s ease;
  position: relative;

  &:checked {
    opacity: 0.5;
    background-color: currentColor;
  }

  &:checked::after {
    content: '';
    position: absolute;
    left: 5px;
    top: 2px;
    width: 5px;
    height: 9px;
    border: solid var(--color-bg);
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
  }

  &:hover:not(:checked)::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: currentColor;
    opacity: 0.25;
    transition: opacity 0.15s ease;
  }
}

/* Select with custom arrow */
@utility select-retro {
  appearance: none;
  background-color: var(--color-accent-subtle);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%231A1A1A' d='M6 8L2 4h8z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.5rem center;

  .dark & {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23FFFFFF' d='M6 8L2 4h8z'/%3E%3C/svg%3E");
  }

  &:hover {
    background-color: var(--color-accent-subtle-hover);
  }
}

/* ===================================
   PATTERNS
   =================================== */

.pattern-diagonal {
  background-color: var(--color-bg);
  background-size: 7px 7px;
  background-image: repeating-linear-gradient(45deg, var(--color-text) 0, var(--color-text) 2px, var(--color-bg) 0, var(--color-bg) 50%);
}

.pattern-dots {
  background-color: var(--color-bg);
  background-image: radial-gradient(var(--color-text) 1.5px, var(--color-bg) 1.5px);
  background-size: 6px 6px;
}

.pattern-hlines {
  background-color: var(--color-bg);
  background-size: 6px 6px;
  background-image:  repeating-linear-gradient(0deg, var(--color-text), var(--color-text) 2px, var(--color-bg) 2px, var(--color-bg));
}

.pattern-vlines {
  background-color: var(--color-bg);
  background-size: 6px 6px;
  background-image:  repeating-linear-gradient(90deg, var(--color-text), var(--color-text) 2px, var(--color-bg) 2px, var(--color-bg));
}

.pattern-zigzag {
  background-color: var(--color-bg);
  background-image:  linear-gradient(135deg, var(--color-text) 25%, transparent 25%), linear-gradient(225deg, var(--color-text) 25%, transparent 25%), linear-gradient(45deg, var(--color-text) 25%, transparent 25%), linear-gradient(315deg, var(--color-text) 25%, var(--color-bg) 25%);
  background-position:  4px 0, 4px 0, 0 0, 0 0;
  background-size: 8px 8px;
  background-repeat: repeat;
}

.pattern-rectangles {
  background-color: var(--color-bg);
  background-image:  repeating-linear-gradient(45deg, var(--color-text) 25%, transparent 25%, transparent 75%, var(--color-text) 75%, var(--color-text)), repeating-linear-gradient(45deg, var(--color-text) 25%, var(--color-bg) 25%, var(--color-bg) 75%, var(--color-text) 75%, var(--color-text));
  background-position: 0 0, 4px 4px;
  background-size: 8px 8px;
}

.pattern-diamonds {
  background-color: var(--color-bg);
  background-image:  linear-gradient(135deg, var(--color-text) 25%, transparent 25%), linear-gradient(225deg, var(--color-text) 25%, transparent 25%), linear-gradient(45deg, var(--color-text) 25%, transparent 25%), linear-gradient(315deg, var(--color-text) 25%, var(--color-bg) 25%);
  background-position:  7px 0, 7px 0, 0 0, 0 0;
  background-size: 7px 7px;
  background-repeat: repeat;
}

.pattern-grid {
  background-color: var(--color-bg);
  background-image:  linear-gradient(var(--color-text) 2px, transparent 2px), linear-gradient(to right, var(--color-text) 2px, var(--color-bg) 2px);
  background-size: 7px 7px;
}

.pattern-triangles {
  background-color: var(--color-bg);
  background-image: linear-gradient(45deg, var(--color-text) 50%, var(--color-bg) 50%);
  background-size: 7px 7px;
}
